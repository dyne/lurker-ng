.\" $Header: /home/terpstra/cvt/lurker/lurker/prune/lurker-prune.1,v 1.8 2004-08-28 10:50:21 terpstra Exp $
.\"
.\"	transcript compatibility for postscript use.
.\"
.\"	synopsis:  .P! <file.ps>
.\"
.de P!
.fl
\!!1 setgray
.fl
\\&.\"
.fl
\!!0 setgray
.fl			\" force out current output buffer
\!!save /psv exch def currentpoint translate 0 0 moveto
\!!/showpage{}def
.fl			\" prolog
.sy sed -e 's/^/!/' \\$1\" bring in postscript file
\!!psv restore
.
.de pF
.ie     \\*(f1 .ds f1 \\n(.f
.el .ie \\*(f2 .ds f2 \\n(.f
.el .ie \\*(f3 .ds f3 \\n(.f
.el .ie \\*(f4 .ds f4 \\n(.f
.el .tm ? font overflow
.ft \\$1
..
.de fP
.ie     !\\*(f4 \{\
.	ft \\*(f4
.	ds f4\"
'	br \}
.el .ie !\\*(f3 \{\
.	ft \\*(f3
.	ds f3\"
'	br \}
.el .ie !\\*(f2 \{\
.	ft \\*(f2
.	ds f2\"
'	br \}
.el .ie !\\*(f1 \{\
.	ft \\*(f1
.	ds f1\"
'	br \}
.el .tm ? font underflow
..
.ds f1\"
.ds f2\"
.ds f3\"
.ds f4\"
'\" t 
.ta 8n 16n 24n 32n 40n 48n 56n 64n 72n  
.TH "LURKER\-PRUNE" "1" 
.SH "NAME" 
lurker\-prune \(em prunes the web-server cache 
.SH "SYNOPSIS" 
.PP 
\fBlurker\-prune\fR [\-c <config-file>]  [\-d <docroot>]  [\-p \-v]  
.SH "DESCRIPTION" 
.PP 
\fBlurker\-prune\fR prunes obsolete or stale files 
from the web-server accessible cache. This command must be run at 
regular intervals from eg. a cronjob. If it is not run, then the 
lurker web interface will appear to not be receiving new mail or have 
contradictory links between pages. A good interval is every 15 minutes 
and should not exceed one hour. 
.PP 
Be aware that it is possible for an attacker to use up a large 
amount of disk space through lurker. An attacker could request many 
distinct lurker web pages each of which is cached, thus using disk 
space. Please setup a quota for the lurker user, read your logs, and 
follow whatever site-specific policies you have for denial of  
service. 
.PP 
A good script to run in parallel with normal lurker\-prune use is  
one similar to:  
if test `du \-s /var/www/lurker | cut \-f1` \-gt 32768; then lurker\-prune \-p; fi 
This might help guard against a potential denial-of-service attack. 
.SH "OPTIONS" 
.IP "\fB\-c config-file\fP" 10 
Use this config file for lurker settings. 
.IP "\fB\-d docroot\fP" 10 
The base directory of the lurker cache. This must be set to 
the directory which contains message/*, thread/*, etc. If you have 
multiple running lurker interfaces, you must run this pointing 
at each of the document roots. 
.IP "\fB\-m days\fP" 10 
Keep cached files for at most this many days. Any cached 
file regardless of last access will be deleted after the specified 
number of days (defaults to 7). Files which are obsolete due to 
new mail, config changes, or no accesses will be deleted earlier. 
Deleted files will be automagically regenerated if needed. 
.IP "\fB\-a days\fP" 10 
Kill cache files not accessed for this many days. Any cached 
file which has not been read from for the specified number of days 
(defaults to 1) will be deleted. Files which are obsolete due to 
new mail or config changes will be deleted earlier.  Deleted files 
will be automagically regenerated if needed. 
.IP "\fB\-p\fP" 10 
Purge mode. Delete all cache files even if they do not appear 
to be expired. This will only deletes files that are generated by 
lurker, and is thus preferable to rm */*. 
.IP "\fB\-v\fP" 10 
Verbose operation. Indicate which files are being deleted 
and the reasoning behind lurker's decisions. This can help in 
tracking down why some files are deleted and not others. 
.SH "SEE ALSO" 
.PP 
lurker\-index(1), lurker\-params(1), lurker\-list(1) 
.PP 
lurker documentation on http://lurker.sourceforge.net/ 
.SH "COPYRIGHT" 
.PP 
Copyright (C) 2002: Wesley W. Terpstra <terpstra@users.sourceforge.net> 
 
.PP 
This program is free software; you can redistribute it and/or modify 
it under the terms of the GNU General Public License as published by 
the Free Software Foundation; version 2. 
 
.PP 
This program is distributed in the hope that it will be useful, 
but WITHOUT ANY WARRANTY; without even the implied warranty of 
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the 
GNU General Public License for more details. 
 
.PP 
You should have received a copy of the GNU General Public License 
along with this program; if not, write to the Free Software 
Foundation, Inc., 59 Temple Place - Suite 330, 
Boston, MA 02111-1307, USA. 
 
.SH "BUGS" 
.PP 
Before reporting a bug, please confirm that the bug you found is 
still present in the latest official release. If the problem persists, 
then send mail with instructions describing how to reproduce the bug to 
<lurker\-users@lists.sourceforge.net>. 
.\" created by instant / docbook-to-man, Sat 28 Aug 2004, 12:48 
