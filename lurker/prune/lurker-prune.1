.\" This -*- nroff -*- file has been generated from
.\" DocBook SGML with docbook-to-man on Debian GNU/Linux.
...\"
...\"	transcript compatibility for postscript use.
...\"
...\"	synopsis:  .P! <file.ps>
...\"
.de P!
\\&.
.fl			\" force out current output buffer
\\!%PB
\\!/showpage{}def
...\" the following is from Ken Flowers -- it prevents dictionary overflows
\\!/tempdict 200 dict def tempdict begin
.fl			\" prolog
.sy cat \\$1\" bring in postscript file
...\" the following line matches the tempdict above
\\!end % tempdict %
\\!PE
\\!.
.sp \\$2u	\" move below the image
..
.de pF
.ie     \\*(f1 .ds f1 \\n(.f
.el .ie \\*(f2 .ds f2 \\n(.f
.el .ie \\*(f3 .ds f3 \\n(.f
.el .ie \\*(f4 .ds f4 \\n(.f
.el .tm ? font overflow
.ft \\$1
..
.de fP
.ie     !\\*(f4 \{\
.	ft \\*(f4
.	ds f4\"
'	br \}
.el .ie !\\*(f3 \{\
.	ft \\*(f3
.	ds f3\"
'	br \}
.el .ie !\\*(f2 \{\
.	ft \\*(f2
.	ds f2\"
'	br \}
.el .ie !\\*(f1 \{\
.	ft \\*(f1
.	ds f1\"
'	br \}
.el .tm ? font underflow
..
.ds f1\"
.ds f2\"
.ds f3\"
.ds f4\"
'\" t 
.ta 8n 16n 24n 32n 40n 48n 56n 64n 72n  
.TH "LURKER-PRUNE" "1" 
.SH "NAME" 
lurker-prune \(em prunes the web-server cache 
.SH "SYNOPSIS" 
.PP 
\fBlurker-prune\fP [-c <config-file>]  [-d <docroot>]  [-v]  
.SH "DESCRIPTION" 
.PP 
\fBlurker-prune\fP prunes obsolete or stale html/xml 
from the web-server accessible cache. This command must be run at 
regular intervals from eg. a cronjob. If it is not run, then the 
lurker web interface will appear to not be receiving new mail or have 
contradictory links between pages. A good interval is every 15 minutes 
and should not exceed one hour. 
.PP 
Be aware that it is possible for an attacker to use up a large 
amount of disk space through lurker. An attacker could request many 
distinct lurker web pages each of which is cached, thus using disk 
space. Please setup a quota for the lurker user, read your logs, and 
follow whatever site-specific policies you have for denial of  
service. 
.PP 
A good script to run in parallel with lurker-prune is one similar 
to: if test `du -s /var/www/lurker | cut -f1` -gt 32768; then rm -f 
/var/www/lurker/[m-t]*/*; fi. This might help guard against a 
potential denial-of-service attack. 
.SH "OPTIONS" 
.IP "\fB-c config-file\fP" 10 
Use this config file for lurker settings. 
.IP "\fB-d docroot\fP" 10 
The base directory of the lurker cache. This must be set to 
the directory which contains message/*, thread/*, etc. If you have 
multiple running lurker interfaces, you must run this pointing 
at each of the document roots. 
.IP "\fB-m days\fP" 10 
Keep cached files for at most this many days. Any cached 
file regardless of last access will be deleted after the specified 
number of days (defaults to 7). Files which are obsolete due to 
new mail, config changes, or no accesses will be deleted earlier. 
Deleted files will be automagically regenerated if needed. 
.IP "\fB-a days\fP" 10 
Kill cache files not accessed for this many days. Any cached 
file which has not been read from for the specified number of days 
(defaults to 1) will be deleted. Files which are obsolete due to 
new mail or config changes will be deleted earlier.  Deleted files 
will be automagically regenerated if needed. 
.IP "\fB-v\fP" 10 
Verbose operation. Indicate which files are being deleted 
and the reasoning behind lurker's decisions. This can help in 
tracking down why some files are deleted and not others. 
.SH "SEE ALSO" 
.PP 
lurker documentation on http://lurker.sourceforge.net/ and in 
/usr/share/doc/lurker. 
.SH "AUTHOR" 
.PP 
This manual page was written by Wesley W. Terpstra <terpstra@users.sourceforge.net> for the 
\fBlurker\fP distribution. It was adapted from a manpage by Jonas Meurer 
<jonas@freesources.org>. Permission is granted to copy, distribute and/or modify 
this document under the terms of the GNU Free 
Documentation License, Version 1.1 or any later version published by 
the Free Software Foundation; with no Invariant Sections, no 
Front-Cover Texts and no Back-Cover Texts. 
...\" created by instant / docbook-to-man, Sun 18 May 2003, 14:07 
